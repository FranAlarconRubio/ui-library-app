<li class="list-group-item p-0">
  <div class="d-flex align-items-center" (click)="selectNode()">
    <input type="checkbox" class="form-check-input me-2" />
    @if (node!.children?.length) {
      <button class="btn btn-sm btn-link p-0 me-2" (click)="toggleExpand()">
        <i [class.bi-caret-down-fill]="$isExpanded()" [class.bi-caret-right-fill]="!$isExpanded()"></i>
      </button>
    }@else {
      <i class="bi bi-file-earmark me-2"></i>
    }
    <span class="fw-bold">{{ node!.label }}</span>
  </div>

  @if ($isExpanded() && node!.children?.length) {
    <ul class="list-group ms-3 mt-2" [ngClass]="{ 'collapsed': !$isExpanded(), 'expanded': $isExpanded() }">
      @for (child of node!.children; track $index) {
        <app-tree-node [node]="child" (nodeSelected)="nodeSelected.emit($event)" ></app-tree-node>
      }
    </ul>
  }
</li>
